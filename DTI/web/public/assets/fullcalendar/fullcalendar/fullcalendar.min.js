!function(t,e){function n(e){t.extend(!0,dt,e)}function r(n,r,l){function u(){L=r.theme?"ui":"fc",n.addClass("fc"),r.isRTL&&n.addClass("fc-rtl"),r.theme&&n.addClass("ui-widget"),N=t("<div class='fc-content' style='position:relative'/>").prependTo(n),F=new a(k,r),(R=F.render())&&n.prepend(R),g(r.defaultView),t(window).resize(S),h()||f()}function f(){setTimeout(function(){!W.start&&h()&&m()},0)}function v(){return 0!==V.offsetWidth}function h(){return 0!==t("body")[0].offsetWidth}function g(e){if(!W||e!=W.name){U++,H();var n,r=W;r?((r.beforeHide||I)(),B(N,N.height()),r.element.hide()):B(N,1),N.css("overflow","hidden"),(W=J[e])?W.element.show():W=J[e]=new gt[e](n=Y=t("<div class='fc-view fc-view-"+e+"' style='position:absolute'/>").appendTo(N),k),r&&F.deactivateButton(r.name),F.activateButton(e),m(),N.css("overflow",""),r&&B(N,1),n||(W.afterShow||I)(),U--}}function m(t){if(v()){U++,H(),O===e&&M();var r=!1;!W.start||t||Z<W.start||Z>=W.end?(W.render(Z,t||0),C(!0),r=!0):W.sizeDirty?(W.clearEvents(),C(),r=!0):W.eventsDirty&&(W.clearEvents(),r=!0),W.sizeDirty=!1,W.eventsDirty=!1,E(r),_=n.outerWidth(),F.updateTitle(W.title);var a=new Date;a>=W.start&&a<W.end?F.disableButton("today"):F.enableButton("today"),U--,W.trigger("viewDisplay",V)}}function y(){b(),v()&&(M(),C(),H(),W.clearEvents(),W.renderEvents($),W.sizeDirty=!1)}function b(){t.each(J,function(t,e){e.sizeDirty=!0})}function M(){O=r.contentHeight?r.contentHeight:r.height?r.height-(R?R.height():0)-A(N):Math.round(N.width()/Math.max(r.aspectRatio,.5))}function C(t){U++,W.setHeight(O,t),Y&&(Y.css("position","relative"),Y=null),W.setWidth(N.width(),t),U--}function S(){if(!U)if(W.start){var t=++X;setTimeout(function(){t==X&&!U&&v()&&_!=(_=n.outerWidth())&&(U++,y(),W.trigger("windowResize",V),U--)},200)}else f()}function E(t){!r.lazyFetching||P(W.visStart,W.visEnd)?x():t&&T()}function x(){q(W.visStart,W.visEnd)}function T(t){z(),v()&&(W.clearEvents(),W.renderEvents($,t),W.eventsDirty=!1)}function z(){t.each(J,function(t,e){e.eventsDirty=!0})}function H(){W&&W.unselect()}var k=this;k.options=r,k.render=function(t){N?(M(),b(),z(),m(t)):u()},k.destroy=function(){t(window).unbind("resize",S),F.destroy(),N.remove(),n.removeClass("fc fc-rtl ui-widget")},k.refetchEvents=x,k.reportEvents=function(t){$=t,T()},k.reportEventChange=function(t){T(t)},k.rerenderEvents=T,k.changeView=g,k.select=function(t,n,r){W.select(t,n,r===e||r)},k.unselect=H,k.prev=function(){m(-1)},k.next=function(){m(1)},k.prevYear=function(){i(Z,-1),m()},k.nextYear=function(){i(Z,1),m()},k.today=function(){Z=new Date,m()},k.gotoDate=function(t,e,n){t instanceof Date?Z=d(t):p(Z,t,e,n),m()},k.incrementDate=function(t,n,r){t!==e&&i(Z,t),n!==e&&s(Z,n),r!==e&&c(Z,r),m()},k.formatDate=function(t,e){return D(t,e,r)},k.formatDates=function(t,e,n){return w(t,e,n,r)},k.getDate=function(){return d(Z)},k.getView=function(){return W},k.option=function(t,n){if(n===e)return r[t];"height"!=t&&"contentHeight"!=t&&"aspectRatio"!=t||(r[t]=n,y())},k.trigger=function(t,e){if(r[t])return r[t].apply(e||V,Array.prototype.slice.call(arguments,2))},o.call(k,r,l);var F,R,N,L,W,_,O,Y,j,P=k.isFetchNeeded,q=k.fetchEvents,V=n[0],J={},X=0,U=0,Z=new Date,$=[];p(Z,r.year,r.month,r.date),r.droppable&&t(document).bind("dragstart",function(e,n){var a=e.target,o=t(a);if(!o.parents(".fc").length){var i=r.dropAccept;(t.isFunction(i)?i.call(a,o):o.is(i))&&(j=a,W.dragStart(j,e,n))}}).bind("dragstop",function(t,e){j&&(W.dragStop(j,t,e),j=null)})}function a(e,n){function r(r){var a=t("<td class='fc-header-"+r+"'/>"),i=n.header[r];return i&&t.each(i.split(" "),function(r){r>0&&a.append("<span class='fc-header-space'/>");var i;t.each(this.split(","),function(r,s){if("title"==s)a.append("<span class='fc-header-title'><h2>&nbsp;</h2></span>"),i&&i.addClass(o+"-corner-right"),i=null;else{var c;if(e[s]?c=e[s]:gt[s]&&(c=function(){f.removeClass(o+"-state-hover"),e.changeView(s)}),c){var l=n.theme?q(n.buttonIcons,s):null,u=q(n.buttonText,s),f=t("<span class='fc-button fc-button-"+s+" "+o+"-state-default'><span class='fc-button-inner'><span class='fc-button-content'>"+(l?"<span class='fc-icon-wrap'><span class='ui-icon ui-icon-"+l+"'/></span>":u)+"</span><span class='fc-button-effect'><span></span></span></span></span>");f&&(f.click(function(){f.hasClass(o+"-state-disabled")||c()}).mousedown(function(){f.not("."+o+"-state-active").not("."+o+"-state-disabled").addClass(o+"-state-down")}).mouseup(function(){f.removeClass(o+"-state-down")}).hover(function(){f.not("."+o+"-state-active").not("."+o+"-state-disabled").addClass(o+"-state-hover")},function(){f.removeClass(o+"-state-hover").removeClass(o+"-state-down")}).appendTo(a),i||f.addClass(o+"-corner-left"),i=f)}}}),i&&i.addClass(o+"-corner-right")}),a}var a=this;a.render=function(){if(o=n.theme?"ui":"fc",n.header)return i=t("<table class='fc-header' style='width:100%'/>").append(t("<tr/>").append(r("left")).append(r("center")).append(r("right")))},a.destroy=function(){i.remove()},a.updateTitle=function(t){i.find("h2").html(t)},a.activateButton=function(t){i.find("span.fc-button-"+t).addClass(o+"-state-active")},a.deactivateButton=function(t){i.find("span.fc-button-"+t).removeClass(o+"-state-active")},a.disableButton=function(t){i.find("span.fc-button-"+t).addClass(o+"-state-disabled")},a.enableButton=function(t){i.find("span.fc-button-"+t).removeClass(o+"-state-disabled")};var o,i=t([])}function o(n,r){function a(t,e){o(t,function(n){if(e==C){if(n){for(var r=0;r<n.length;r++)n[r].source=t,l(n[r]);x=x.concat(n)}--S||D(x)}})}function o(e,r){var a,i,l=ht.sourceFetchers;for(a=0;a<l.length;a++){if(!0===(i=l[a](e,g,p,r)))return;if("object"==typeof i)return void o(i,r)}var u=e.events;if(u)t.isFunction(u)?(s(),u(d(g),d(p),function(t){r(t),c()})):t.isArray(u)?r(u):r();else if(e.url){var f=e.success,v=e.error,h=e.complete,m=t.extend({},e.data||{}),y=G(e.startParam,n.startParam),b=G(e.endParam,n.endParam);y&&(m[y]=Math.round(+g/1e3)),b&&(m[b]=Math.round(+p/1e3)),s(),t.ajax(t.extend({},pt,e,{data:m,success:function(e){e=e||[];var n=Q(f,this,arguments);t.isArray(n)&&(e=n),r(e)},error:function(){Q(v,this,arguments),r()},complete:function(){Q(h,this,arguments),c()}}))}else r()}function i(e){if(t.isFunction(e)||t.isArray(e)?e={events:e}:"string"==typeof e&&(e={url:e}),"object"==typeof e)return u(e),M.push(e),e}function s(){E++||y("loading",null,!0)}function c(){--E||y("loading",null,!1)}function l(t){var r=t.source||{},a=G(r.ignoreTimezone,n.ignoreTimezone);t._id=t._id||(t.id===e?"_fc"+mt++:t.id+""),t.date&&(t.start||(t.start=t.date),delete t.date),t._start=d(t.start=m(t.start,a)),t.end=m(t.end,a),t.end&&t.end<=t.start&&(t.end=null),t._end=t.end?d(t.end):null,t.allDay===e&&(t.allDay=G(r.allDayDefault,n.allDayDefault)),t.className?"string"==typeof t.className&&(t.className=t.className.split(/\s+/)):t.className=[]}function u(t){t.className?"string"==typeof t.className&&(t.className=t.className.split(/\s+/)):t.className=[];for(var e=ht.sourceNormalizers,n=0;n<e.length;n++)e[n](t)}function f(t,e){return t&&e&&v(t)==v(e)}function v(t){return("object"==typeof t?t.events||t.url:"")||t}var h=this;h.isFetchNeeded=function(t,e){return!g||t<g||e>p},h.fetchEvents=function(t,e){g=t,p=e,x=[];var n=++C,r=M.length;S=r;for(var o=0;o<r;o++)a(M[o],n)},h.addEventSource=function(t){(t=i(t))&&(S++,a(t,C))},h.removeEventSource=function(e){M=t.grep(M,function(t){return!f(t,e)}),x=t.grep(x,function(t){return!f(t.source,e)}),D(x)},h.updateEvent=function(t){var e,n,r=x.length,a=b().defaultEventEnd,o=t.start-t._start,i=t.end?t.end-(t._end||a(t)):0;for(e=0;e<r;e++)(n=x[e])._id==t._id&&n!=t&&(n.start=new Date(+n.start+o),t.end?n.end?n.end=new Date(+n.end+i):n.end=new Date(+a(n)+i):n.end=null,n.title=t.title,n.url=t.url,n.allDay=t.allDay,n.className=t.className,n.editable=t.editable,n.color=t.color,n.backgroudColor=t.backgroudColor,n.borderColor=t.borderColor,n.textColor=t.textColor,l(n));l(t),D(x)},h.renderEvent=function(t,e){l(t),t.source||(e&&(w.events.push(t),t.source=w),x.push(t)),D(x)},h.removeEvents=function(e){if(e){if(!t.isFunction(e)){var n=e+"";e=function(t){return t._id==n}}for(x=t.grep(x,e,!0),r=0;r<M.length;r++)t.isArray(M[r].events)&&(M[r].events=t.grep(M[r].events,e,!0))}else{x=[];for(var r=0;r<M.length;r++)t.isArray(M[r].events)&&(M[r].events=[])}D(x)},h.clientEvents=function(e){return t.isFunction(e)?t.grep(x,e):e?(e+="",t.grep(x,function(t){return t._id==e})):x},h.normalizeEvent=l;for(var g,p,y=h.trigger,b=h.getView,D=h.reportEvents,w={events:[]},M=[w],C=0,S=0,E=0,x=[],T=0;T<r.length;T++)i(r[T])}function i(t,e,n){return t.setFullYear(t.getFullYear()+e),n||f(t),t}function s(t,e,n){if(+t){var r=t.getMonth()+e,a=d(t);for(a.setDate(1),a.setMonth(r),t.setMonth(r),n||f(t);t.getMonth()!=a.getMonth();)t.setDate(t.getDate()+(t<a?1:-1))}return t}function c(t,e,n){if(+t){var r=t.getDate()+e,a=d(t);a.setHours(9),a.setDate(r),t.setDate(r),n||f(t),l(t,a)}return t}function l(t,e){if(+t)for(;t.getDate()!=e.getDate();)t.setTime(+t+(t<e?1:-1)*Dt)}function u(t,e){return t.setMinutes(t.getMinutes()+e),t}function f(t){return t.setHours(0),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0),t}function d(t,e){return e?f(new Date(+t)):new Date(+t)}function v(){var t,e=0;do{t=new Date(1970,e++,1)}while(t.getHours());return t}function h(t,e,n){for(e=e||1;!t.getDay()||n&&1==t.getDay()||!n&&6==t.getDay();)c(t,e);return t}function g(t,e){return Math.round((d(t,!0)-d(e,!0))/bt)}function p(t,n,r,a){n!==e&&n!=t.getFullYear()&&(t.setDate(1),t.setMonth(0),t.setFullYear(n)),r!==e&&r!=t.getMonth()&&(t.setDate(1),t.setMonth(r)),a!==e&&t.setDate(a)}function m(t,n){return"object"==typeof t?t:"number"==typeof t?new Date(1e3*t):"string"==typeof t?t.match(/^\d+(\.\d+)?$/)?new Date(1e3*parseFloat(t)):(n===e&&(n=!0),y(t,n)||(t?new Date(t):null)):null}function y(t,e){var n=t.match(/^([0-9]{4})(-([0-9]{2})(-([0-9]{2})([T ]([0-9]{2}):([0-9]{2})(:([0-9]{2})(\.([0-9]+))?)?(Z|(([-+])([0-9]{2})(:?([0-9]{2}))?))?)?)?)?$/);if(!n)return null;var r=new Date(n[1],0,1);if(e||!n[13]){var a=new Date(n[1],0,1,9,0);n[3]&&(r.setMonth(n[3]-1),a.setMonth(n[3]-1)),n[5]&&(r.setDate(n[5]),a.setDate(n[5])),l(r,a),n[7]&&r.setHours(n[7]),n[8]&&r.setMinutes(n[8]),n[10]&&r.setSeconds(n[10]),n[12]&&r.setMilliseconds(1e3*Number("0."+n[12])),l(r,a)}else if(r.setUTCFullYear(n[1],n[3]?n[3]-1:0,n[5]||1),r.setUTCHours(n[7]||0,n[8]||0,n[10]||0,n[12]?1e3*Number("0."+n[12]):0),n[14]){var o=60*Number(n[16])+(n[18]?Number(n[18]):0);o*="-"==n[15]?1:-1,r=new Date(+r+60*o*1e3)}return r}function b(t){if("number"==typeof t)return 60*t;if("object"==typeof t)return 60*t.getHours()+t.getMinutes();var e=t.match(/(\d+)(?::(\d+))?\s*(\w+)?/);if(e){var n=parseInt(e[1],10);return e[3]&&(n%=12,"p"==e[3].toLowerCase().charAt(0)&&(n+=12)),60*n+(e[2]?parseInt(e[2],10):0)}}function D(t,e,n){return w(t,null,e,n)}function w(t,e,n,r){r=r||dt;var a,o,i,s,c=t,l=e,u=n.length,f="";for(a=0;a<u;a++)if("'"==(o=n.charAt(a))){for(i=a+1;i<u;i++)if("'"==n.charAt(i)){c&&(f+=i==a+1?"'":n.substring(a+1,i),a=i);break}}else if("("==o){for(i=a+1;i<u;i++)if(")"==n.charAt(i)){var d=D(c,n.substring(a+1,i),r);parseInt(d.replace(/\D/,""),10)&&(f+=d),a=i;break}}else if("["==o){for(i=a+1;i<u;i++)if("]"==n.charAt(i)){var v=n.substring(a+1,i);(d=D(c,v,r))!=D(l,v,r)&&(f+=d),a=i;break}}else if("{"==o)c=e,l=t;else if("}"==o)c=t,l=e;else{for(i=u;i>a;i--)if(s=Mt[n.substring(a,i)]){c&&(f+=s(c,r)),a=i-1;break}i==a&&c&&(f+=o)}return f}function M(t){return t.end?C(t.end,t.allDay):c(d(t.start),1)}function C(t,e){return t=d(t),e||t.getHours()||t.getMinutes()?c(t,1):f(t)}function S(t,e){return 100*(e.msLength-t.msLength)+(t.event.start-e.event.start)}function E(t,e){return t.end>e.start&&t.start<e.end}function x(t,e,n,r){var a,o,i,s,c,l,u,f,v=[],h=t.length;for(a=0;a<h;a++)i=(o=t[a]).start,(s=e[a])>n&&i<r&&(i<n?(c=d(n),u=!1):(c=i,u=!0),s>r?(l=d(r),f=!1):(l=s,f=!0),v.push({event:o,start:c,end:l,isStart:u,isEnd:f,msLength:l-c}));return v.sort(S)}function T(t){var e,n,r,a,o,i=[],s=t.length;for(e=0;e<s;e++){for(n=t[e],r=0;;){if(a=!1,i[r])for(o=0;o<i[r].length;o++)if(E(i[r][o],n)){a=!0;break}if(!a)break;r++}i[r]?i[r].push(n):i[r]=[n]}return i}function z(n,r,a){n.unbind("mouseover").mouseover(function(n){for(var o,i,s,c=n.target;c!=this;)o=c,c=c.parentNode;(i=o._fci)!==e&&(o._fci=e,s=r[i],a(s.event,s.element,s),t(n.target).trigger(n)),n.stopPropagation()})}function H(e,n,r){for(var a,o=0;o<e.length;o++)(a=t(e[o])).width(Math.max(0,n-F(a,r)))}function k(e,n,r){for(var a,o=0;o<e.length;o++)(a=t(e[o])).height(Math.max(0,n-A(a,r)))}function F(t,e){return R(t)+L(t)+(e?N(t):0)}function R(e){return(parseFloat(t.css(e[0],"paddingLeft",!0))||0)+(parseFloat(t.css(e[0],"paddingRight",!0))||0)}function N(e){return(parseFloat(t.css(e[0],"marginLeft",!0))||0)+(parseFloat(t.css(e[0],"marginRight",!0))||0)}function L(e){return(parseFloat(t.css(e[0],"borderLeftWidth",!0))||0)+(parseFloat(t.css(e[0],"borderRightWidth",!0))||0)}function A(t,e){return W(t)+O(t)+(e?_(t):0)}function W(e){return(parseFloat(t.css(e[0],"paddingTop",!0))||0)+(parseFloat(t.css(e[0],"paddingBottom",!0))||0)}function _(e){return(parseFloat(t.css(e[0],"marginTop",!0))||0)+(parseFloat(t.css(e[0],"marginBottom",!0))||0)}function O(e){return(parseFloat(t.css(e[0],"borderTopWidth",!0))||0)+(parseFloat(t.css(e[0],"borderBottomWidth",!0))||0)}function B(t,e){e="number"==typeof e?e+"px":e,t.each(function(t,n){n.style.cssText+=";min-height:"+e+";_height:"+e})}function I(){}function Y(t,e){return t-e}function j(t){return Math.max.apply(Math,t)}function P(t){return(t<10?"0":"")+t}function q(t,n){if(t[n]!==e)return t[n];for(var r,a=n.split(/(?=[A-Z])/),o=a.length-1;o>=0;o--)if((r=t[a[o].toLowerCase()])!==e)return r;return t[""]}function V(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#039;").replace(/"/g,"&quot;").replace(/\n/g,"<br />")}function J(t){return t.id+"/"+t.className+"/"+t.style.cssText.replace(/(^|;)\s*(top|left|width|height)\s*:[^;]*/gi,"")}function X(t){t.attr("unselectable","on").css("MozUserSelect","none").bind("selectstart.ui",function(){return!1})}function U(t){t.children().removeClass("fc-first fc-last").filter(":first-child").addClass("fc-first").end().filter(":last-child").addClass("fc-last")}function Z(t,e){t.each(function(t,n){n.className=n.className.replace(/^fc-\w*/,"fc-"+yt[e.getDay()])})}function $(t,e){var n=t.source||{},r=t.color,a=n.color,o=e("eventColor"),i=t.backgroundColor||r||n.backgroundColor||a||e("eventBackgroundColor")||o,s=t.borderColor||r||n.borderColor||a||e("eventBorderColor")||o,c=t.textColor||n.textColor||e("eventTextColor"),l=[];return i&&l.push("background-color:"+i),s&&l.push("border-color:"+s),c&&l.push("color:"+c),l.join(";")}function Q(e,n,r){if(t.isFunction(e)&&(e=[e]),e){var a,o;for(a=0;a<e.length;a++)o=e[a].apply(n,r)||o;return o}}function G(){for(var t=0;t<arguments.length;t++)if(arguments[t]!==e)return arguments[t]}function K(e,n,r){function a(){(I=$("isRTL"))?(Y=-1,j=L-1):(Y=1,j=0),P=$("firstDay"),q=$("weekends")?0:1,V=$("theme")?"ui":"fc",J=$("columnFormat")}function o(n,r){var a,o,i,c,l=V+"-widget-header",u=V+"-widget-content";for(a="<table class='fc-border-separate' style='width:100%' cellspacing='0'><thead><tr>",o=0;o<L;o++)a+="<th class='fc- "+l+"'/>";for(a+="</tr></thead><tbody>",o=0;o<n;o++){for(a+="<tr class='fc-week"+o+"'>",i=0;i<L;i++)a+="<td class='fc- "+u+" fc-day"+(o*L+i)+"'><div>"+(r?"<div class='fc-day-number'/>":"")+"<div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></div></td>";a+="</tr>"}c=t(a+="</tbody></table>").appendTo(e),w=c.find("thead"),M=w.find("th"),C=c.find("tbody"),S=C.find("tr"),E=C.find("td"),x=E.filter(":first-child"),T=S.eq(0).find("div.fc-day-content div"),U(w.add(w.find("tr"))),U(S),S.eq(0).addClass("fc-first"),s(E),z=t("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(e)}function i(e){var n,r,a,o=e||1==N,i=D.start.getMonth(),s=f(new Date);o&&M.each(function(e,a){n=t(a),r=y(e),n.html(rt(r,J)),Z(n,r)}),E.each(function(e,a){n=t(a),(r=y(e)).getMonth()==i?n.removeClass("fc-other-month"):n.addClass("fc-other-month"),+r==+s?n.addClass(V+"-state-highlight fc-today"):n.removeClass(V+"-state-highlight fc-today"),n.find("div.fc-day-number").text(r.getDate()),o&&Z(n,r)}),S.each(function(e,n){a=t(n),e<N?(a.show(),e==N-1?a.addClass("fc-last"):a.removeClass("fc-last")):a.hide()})}function s(t){t.click(l).mousedown(nt)}function l(t){if(!$("selectable")){var e=y(parseInt(this.className.match(/fc\-day(\d+)/)[1]));Q("dayClick",this,e,!0,t)}}function u(t,e,n){n&&W.build();for(var r=d(D.visStart),a=c(d(r),L),o=0;o<N;o++){var i=new Date(Math.max(r,t)),l=new Date(Math.min(a,e));if(i<l){var u,f;I?(u=g(l,r)*Y+j+1,f=g(i,r)*Y+j+1):(u=g(i,r),f=g(l,r)),s(v(o,u,o,f-1))}c(r,7),c(a,7)}}function v(t,n,r,a){var o=W.rect(t,n,r,a,e);return K(o,e)}function h(t){return{row:Math.floor(g(t,D.visStart)/7),col:b(t.getDay())}}function p(t){return m(t.row,t.col)}function m(t,e){return c(d(D.visStart),7*t+e*Y+j)}function y(t){return m(Math.floor(t/L),t%L)}function b(t){return(t-Math.max(P,q)+L)%L*Y+j}var D=this;D.renderBasic=function(t,e,n,r){N=e,L=n,a();var s=!C;s?o(t,r):G(),i(s)},D.setHeight=function(e){var n,r,a,o=(F=e)-w.height();"variable"==$("weekMode")?n=r=Math.floor(o/(1==N?2:6)):(n=Math.floor(o/N),r=o-n*(N-1)),x.each(function(e,o){e<N&&B((a=t(o)).find("> div"),(e==N-1?r:n)-A(a))})},D.setWidth=function(t){k=t,O.clear(),R=Math.floor(k/L),H(M.slice(0,-1),R)},D.renderDayOverlay=u,D.defaultSelectionEnd=function(t,e){return d(t)},D.renderSelection=function(t,e,n){u(t,c(d(e),1),!0)},D.clearSelection=function(){et()},D.reportDayClick=function(t,e,n){var r=h(t),a=E[r.row*L+r.col];Q("dayClick",a,t,e,n)},D.dragStart=function(t,e,n){_.start(function(t){et(),t&&v(t.row,t.col,t.row,t.col)},e)},D.dragStop=function(t,e,n){var r=_.stop();if(et(),r){var a=p(r);Q("drop",t,a,!0,e,n)}},D.defaultEventEnd=function(t){return d(t.start)},D.getHoverListener=function(){return _},D.colContentLeft=function(t){return O.left(t)},D.colContentRight=function(t){return O.right(t)},D.dayOfWeekCol=b,D.dateCell=h,D.cellDate=p,D.cellIsAllDay=function(){return!0},D.allDayRow=function(t){return S.eq(t)},D.allDayBounds=function(t){return{left:0,right:k}},D.getRowCnt=function(){return N},D.getColCnt=function(){return L},D.getColWidth=function(){return R},D.getDaySegmentContainer=function(){return z},at.call(D,e,n,r),st.call(D),it.call(D),tt.call(D);var w,M,C,S,E,x,T,z,k,F,R,N,L,W,_,O,I,Y,j,P,q,V,J,$=D.opt,Q=D.trigger,G=D.clearEvents,K=D.renderOverlay,et=D.clearOverlays,nt=D.daySelectionMousedown,rt=n.formatDate;X(e.addClass("fc-grid")),W=new ct(function(e,n){var r,a,o;M.each(function(e,i){r=t(i),a=r.offset().left,e&&(o[1]=a),o=[a],n[e]=o}),o[1]=a+r.outerWidth(),S.each(function(n,i){n<N&&(r=t(i),a=r.offset().top,n&&(o[1]=a),o=[a],e[n]=o)}),o[1]=a+r.outerHeight()}),_=new lt(W),O=new ft(function(t){return T.eq(t)})}function tt(){function e(e){var n,a,o,i,s,l,u=D(),f=w(),v=d(r.visStart),h=c(d(v),f),g=t.map(e,M),p=[];for(n=0;n<u;n++){for(a=T(x(e,g,v,h)),o=0;o<a.length;o++)for(i=a[o],s=0;s<i.length;s++)(l=i[s]).row=n,l.level=o,p.push(l);c(v,7),c(h,7)}return p}function n(t,e){var n,r=m();e.draggable({zIndex:9,delay:50,opacity:a("dragOpacity"),revertDuration:a("dragRevertDuration"),start:function(i,s){o("eventDragStart",e,t,i,s),h(t,e),r.start(function(r,o,i,s){e.draggable("option","revert",!r||!i&&!s),b(),r?(n=7*i+s*(a("isRTL")?-1:1),y(c(d(t.start),n),c(M(t),n))):n=0},i,"drag")},stop:function(a,i){r.stop(),b(),o("eventDragStop",e,t,a,i),n?g(this,t,n,0,t.allDay,a,i):(e.css("filter",""),v(t,e))}})}var r=this;r.renderEvents=function(t,n){l(t),C(e(t),n)},r.compileDaySegs=e,r.clearEvents=function(){u(),p().empty()},r.bindDaySeg=function(t,e,r){i(t)&&n(t,e),r.isEnd&&s(t)&&S(t,e,r),f(t,e)},ot.call(r);var a=r.opt,o=r.trigger,i=r.isEventDraggable,s=r.isEventResizable,l=r.reportEvents,u=r.reportEventClear,f=r.eventElementHandlers,v=r.showEvents,h=r.hideEvents,g=r.eventDrop,p=r.getDaySegmentContainer,m=r.getHoverListener,y=r.renderDayOverlay,b=r.clearOverlays,D=r.getRowCnt,w=r.getColCnt,C=r.renderDaySegs,S=r.resizableDayEvent}function et(n,r,a){function o(){St=Nt("theme")?"ui":"fc",xt=Nt("weekends")?0:1,Et=Nt("firstDay"),(Tt=Nt("isRTL"))?(zt=-1,Ht=bt-1):(zt=1,Ht=0),kt=b(Nt("minTime")),Ft=b(Nt("maxTime")),Rt=Nt("columnFormat")}function i(){var e,r,a,o,i,s=St+"-widget-header",c=St+"-widget-content",l=Nt("slotMinutes")%15==0;for(e="<table style='width:100%' class='fc-agenda-days fc-border-separate' cellspacing='0'><thead><tr><th class='fc-agenda-axis "+s+"'>&nbsp;</th>",r=0;r<bt;r++)e+="<th class='fc- fc-col"+r+" "+s+"'/>";for(e+="<th class='fc-agenda-gutter "+s+"'>&nbsp;</th></tr></thead><tbody><tr><th class='fc-agenda-axis "+s+"'>&nbsp;</th>",r=0;r<bt;r++)e+="<td class='fc- fc-col"+r+" "+c+"'><div><div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></div></td>";for(L=t(e+="<td class='fc-agenda-gutter "+c+"'>&nbsp;</td></tr></tbody></table>").appendTo(n),W=L.find("thead"),_=W.find("th").slice(1,-1),O=L.find("tbody"),B=O.find("td").slice(0,-1),I=B.find("div.fc-day-content div"),j=B.eq(0),P=j.find("> div"),U(W.add(W.find("tr"))),U(O.add(O.find("tr"))),rt=W.find("th:first"),ot=L.find(".fc-agenda-gutter"),q=t("<div style='position:absolute;z-index:2;left:0;width:100%'/>").appendTo(n),Nt("allDaySlot")?(V=t("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(q),e="<table style='width:100%' class='fc-agenda-allday' cellspacing='0'><tr><th class='"+s+" fc-agenda-axis'>"+Nt("allDayText")+"</th><td><div class='fc-day-content'><div style='position:relative'/></div></td><th class='"+s+" fc-agenda-gutter'>&nbsp;</th></tr></table>",J=t(e).appendTo(q),h(($=J.find("tr")).find("td")),rt=rt.add(J.find("th:first")),ot=ot.add(J.find("th.fc-agenda-gutter")),q.append("<div class='fc-agenda-divider "+s+"'><div class='fc-agenda-divider-inner'/></div>")):V=t([]),Q=t("<div style='position:absolute;width:100%;overflow-x:hidden;overflow-y:auto'/>").appendTo(q),G=t("<div style='position:relative;width:100%;overflow:hidden'/>").appendTo(Q),K=t("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(G),e="<table class='fc-agenda-slots' style='width:100%' cellspacing='0'><tbody>",o=u(d(a=v()),Ft),u(a,kt),Dt=0,r=0;a<o;r++)e+="<tr class='fc-slot"+r+" "+((i=a.getMinutes())?"fc-minor":"")+"'><th class='fc-agenda-axis "+s+"'>"+(l&&i?"&nbsp;":jt(a,Nt("axisFormat")))+"</th><td class='"+c+"'><div style='position:relative'>&nbsp;</div></td></tr>",u(a,Nt("slotMinutes")),Dt++;tt=t(e+="</tbody></table>").appendTo(G),et=tt.find("div:first"),p(tt.find("td")),rt=rt.add(tt.find("th:first"))}function s(){var t,e,n,r,a=f(new Date);for(t=0;t<bt;t++)r=C(t),(e=_.eq(t)).html(jt(r,Rt)),n=B.eq(t),+r==+a?n.addClass(St+"-state-highlight fc-today"):n.removeClass(St+"-state-highlight fc-today"),Z(e.add(n),r)}function l(){function t(){Q.scrollTop(r)}var e=v(),n=d(e);n.setHours(Nt("firstHour"));var r=x(e,n)+1;t(),setTimeout(t,0)}function h(t){t.click(m).mousedown(It)}function p(t){t.click(m).mousedown(F)}function m(t){if(!Nt("selectable")){var e=Math.min(bt-1,Math.floor((t.pageX-L.offset().left-ht)/gt)),n=C(e),r=this.parentNode.className.match(/fc-slot(\d+)/);if(r){var a=parseInt(r[1])*Nt("slotMinutes"),o=Math.floor(a/60);n.setHours(o),n.setMinutes(a%60+kt),Lt("dayClick",B[e],n,!1,t)}else Lt("dayClick",B[e],n,!0,t)}}function y(t,e,n){n&&wt.build();var r,a,o=d(N.visStart);Tt?(r=g(e,o)*zt+Ht+1,a=g(t,o)*zt+Ht+1):(r=g(t,o),a=g(e,o)),(r=Math.max(0,r))<(a=Math.min(bt,a))&&h(D(0,r,0,a-1))}function D(t,e,n,r){var a=wt.rect(t,e,n,r,q);return Wt(a,q)}function w(t,e){for(var n=d(N.visStart),r=c(d(n),1),a=0;a<bt;a++){var o=new Date(Math.max(n,t)),i=new Date(Math.min(r,e));if(o<i){var s=a*zt+Ht,l=wt.rect(0,s,0,s,G),u=x(n,o),f=x(n,i);l.top=u,l.height=f-u,p(Wt(l,G))}c(n,1),c(r,1)}}function M(t){var e=C(t.col),n=t.row;return Nt("allDaySlot")&&n--,n>=0&&u(e,kt+n*Nt("slotMinutes")),e}function C(t){return c(d(N.visStart),t*zt+Ht)}function S(t){return Nt("allDaySlot")&&!t.row}function E(t){return(t-Math.max(Et,xt)+bt)%bt*zt+Ht}function x(t,n){if(t=d(t,!0),n<u(d(t),kt))return 0;if(n>=u(d(t),Ft))return tt.height();var r=Nt("slotMinutes"),a=60*n.getHours()+n.getMinutes()-kt,o=Math.floor(a/r),i=Pt[o];return i===e&&(i=Pt[o]=tt.find("tr:eq("+o+") td div")[0].offsetTop),Math.max(0,Math.round(i-1+mt*(a%r/r)))}function T(e,n){var r=Nt("selectHelper");if(wt.build(),r){var a=g(e,N.visStart)*zt+Ht;if(a>=0&&a<bt){var o=wt.rect(0,a,0,a,G),i=x(e,e),s=x(e,n);if(s>i){if(o.top=i,o.height=s-i,o.left+=2,o.width-=5,t.isFunction(r)){var c=r(e,n);c&&(o.position="absolute",o.zIndex=8,ut=t(c).css(o).appendTo(G))}else o.isStart=!0,o.isEnd=!0,(ut=t(Yt({title:"",start:e,end:n,className:["fc-select-helper"],editable:!1},o))).css("opacity",Nt("dragOpacity"));ut&&(p(ut),G.append(ut),H(ut,o.width,!0),k(ut,o.height,!0))}}}else w(e,n)}function z(){_t(),ut&&(ut.remove(),ut=null)}function F(e){if(1==e.which&&Nt("selectable")){Bt(e);var n;Mt.start(function(t,e){if(z(),t&&t.col==e.col&&!S(t)){var r=M(e),a=M(t);T((n=[r,u(d(r),Nt("slotMinutes")),a,u(d(a),Nt("slotMinutes"))].sort(Y))[0],n[3])}else n=null},e),t(document).one("mouseup",function(t){Mt.stop(),n&&(+n[0]==+n[1]&&R(n[0],!1,t),Ot(n[0],n[3],!1,t))})}}function R(t,e,n){Lt("dayClick",B[E(t.getDay())],t,e,n)}var N=this;N.renderAgenda=function(t){bt=t,o(),L?At():i(),s()},N.setWidth=function(e){dt=e,Ct.clear(),ht=0,H(rt.width("").each(function(e,n){ht=Math.max(ht,t(n).outerWidth())}),ht);var n=Q[0].clientWidth;(pt=Q.width()-n)?(H(ot,pt),ot.show().prev().removeClass("fc-last")):ot.hide().prev().addClass("fc-last"),gt=Math.floor((n-ht)/bt),H(_.slice(0,-1),gt)},N.setHeight=function(t,n){t===e&&(t=vt),vt=t,Pt={};var r=O.position().top,a=Q.position().top,o=Math.min(t-r,tt.height()+a+1);P.height(o-A(j)),q.css("top",r),Q.height(o-a-1),mt=et.height()+1,n&&l()},N.beforeHide=function(){yt=Q.scrollTop()},N.afterShow=function(){Q.scrollTop(yt)},N.defaultEventEnd=function(t){var e=d(t.start);return t.allDay?e:u(e,Nt("defaultEventMinutes"))},N.timePosition=x,N.dayOfWeekCol=E,N.dateCell=function(t){return{row:Math.floor(g(t,N.visStart)/7),col:E(t.getDay())}},N.cellDate=M,N.cellIsAllDay=S,N.allDayRow=function(t){return $},N.allDayBounds=function(){return{left:ht,right:dt-pt}},N.getHoverListener=function(){return Mt},N.colContentLeft=function(t){return Ct.left(t)},N.colContentRight=function(t){return Ct.right(t)},N.getDaySegmentContainer=function(){return V},N.getSlotSegmentContainer=function(){return K},N.getMinMinute=function(){return kt},N.getMaxMinute=function(){return Ft},N.getBodyContent=function(){return G},N.getRowCnt=function(){return 1},N.getColCnt=function(){return bt},N.getColWidth=function(){return gt},N.getSlotHeight=function(){return mt},N.defaultSelectionEnd=function(t,e){return e?d(t):u(d(t),Nt("slotMinutes"))},N.renderDayOverlay=y,N.renderSelection=function(t,e,n){n?Nt("allDaySlot")&&y(t,c(d(e),1),!0):T(t,e)},N.clearSelection=z,N.reportDayClick=R,N.dragStart=function(t,e,n){Mt.start(function(t){if(_t(),t)if(S(t))D(t.row,t.col,t.row,t.col);else{var e=M(t);w(e,u(d(e),Nt("defaultEventMinutes")))}},e)},N.dragStop=function(t,e,n){var r=Mt.stop();_t(),r&&Lt("drop",t,M(r),S(r),e,n)},at.call(N,n,r,a),st.call(N),it.call(N),nt.call(N);var L,W,_,O,B,I,j,P,q,V,J,$,Q,G,K,tt,et,rt,ot,ut,dt,vt,ht,gt,pt,mt,yt,bt,Dt,wt,Mt,Ct,St,Et,xt,Tt,zt,Ht,kt,Ft,Rt,Nt=N.opt,Lt=N.trigger,At=N.clearEvents,Wt=N.renderOverlay,_t=N.clearOverlays,Ot=N.reportSelection,Bt=N.unselect,It=N.daySelectionMousedown,Yt=N.slotSegHtml,jt=r.formatDate,Pt={};X(n.addClass("fc-agenda")),wt=new ct(function(e,n){function r(t){return Math.max(c,Math.min(l,t))}var a,o,i;_.each(function(e,r){a=t(r),o=a.offset().left,e&&(i[1]=o),i=[o],n[e]=i}),i[1]=o+a.outerWidth(),Nt("allDaySlot")&&(o=(a=$).offset().top,e[0]=[o,o+a.outerHeight()]);for(var s=G.offset().top,c=Q.offset().top,l=c+Q.outerHeight(),u=0;u<Dt;u++)e.push([r(s+mt*u),r(s+mt*(u+1))])}),Mt=new lt(wt),Ct=new ft(function(t){return I.eq(t)})}function nt(){function n(e){var n,r,a,o,i=T(x(e,t.map(e,M),h.visStart,h.visEnd)),s=i.length,c=[];for(n=0;n<s;n++)for(r=i[n],a=0;a<r.length;a++)(o=r[a]).row=0,o.level=n,c.push(o);return c}function r(e){var n,r,o,i,s,l,f=Y(),v=L(),g=N(),p=u(d(h.visStart),v),m=t.map(e,a),y=[];for(n=0;n<f;n++){for(rt(r=T(x(e,m,p,u(d(p),g-v)))),o=0;o<r.length;o++)for(i=r[o],s=0;s<i.length;s++)(l=i[s]).col=n,l.level=o,y.push(l);c(p,1,!0)}return y}function a(t){return t.end?d(t.end):u(d(t.start),g("defaultEventMinutes"))}function o(n,r){var a,o,c,l,u,f,d,v,h,m,y,b,D,w,M,C,S,E,x,T,k,R,N=n.length,L="",B={},I={},j=H(),P=Y();for((T=g("isRTL"))?(k=-1,R=P-1):(k=1,R=0),a=0;a<N;a++)c=(o=n[a]).event,l=W(o.start,o.start),u=W(o.start,o.end),f=o.col,d=o.level,v=o.forward||0,h=_(f*k+R),m=O(f*k+R)-h,m=Math.min(m-6,.95*m),y=d?m/(d+v+1):v?2*(m/(v+1)-6):m,b=h+m/(d+v+1)*d*k+(T?m-y:0),o.top=l,o.left=b,o.outerWidth=y,o.outerHeight=u-l,L+=i(c,o);for(j[0].innerHTML=L,D=j.children(),a=0;a<N;a++)c=(o=n[a]).event,w=t(D[a]),!1===(M=p("eventRender",c,c,w))?w.remove():(M&&!0!==M&&(w.remove(),w=t(M).css({position:"absolute",top:o.top,left:o.left}).appendTo(j)),o.element=w,c._id===r?s(c,w,o):w[0]._fci=a,X(c,w));for(z(j,n,s),a=0;a<N;a++)(w=(o=n[a]).element)&&(S=B[C=o.key=J(w[0])],o.vsides=S===e?B[C]=A(w,!0):S,S=I[C],o.hsides=S===e?I[C]=F(w,!0):S,(E=w.find("div.fc-event-content")).length&&(o.contentTop=E[0].offsetTop));for(a=0;a<N;a++)(w=(o=n[a]).element)&&(w[0].style.width=Math.max(0,o.outerWidth-o.hsides)+"px",x=Math.max(0,o.outerHeight-o.vsides),w[0].style.height=x+"px",c=o.event,o.contentTop!==e&&x-o.contentTop<10&&(w.find("div.fc-event-time").text(nt(c.start,g("timeFormat"))+" - "+c.title),w.find("div.fc-event-title").remove()),p("eventAfterRender",c,c,w))}function i(t,e){var n="<",r=t.url,a=$(t,g),o=a?" style='"+a+"'":"",i=["fc-event","fc-event-skin","fc-event-vert"];return m(t)&&i.push("fc-event-draggable"),e.isStart&&i.push("fc-corner-top"),e.isEnd&&i.push("fc-corner-bottom"),i=i.concat(t.className),t.source&&(i=i.concat(t.source.className||[])),n+=r?"a href='"+V(t.url)+"'":"div",n+=" class='"+i.join(" ")+"' style='position:absolute;z-index:8;top:"+e.top+"px;left:"+e.left+"px;"+a+"'><div class='fc-event-inner fc-event-skin'"+o+"><div class='fc-event-head fc-event-skin'"+o+"><div class='fc-event-time'>"+V(at(t.start,t.end,g("timeFormat")))+"</div></div><div class='fc-event-content'><div class='fc-event-title'>"+V(t.title)+"</div></div><div class='fc-event-bg'></div></div>",e.isEnd&&y(t)&&(n+="<div class='ui-resizable-handle ui-resizable-s'>=</div>"),n+="</"+(r?"a":"div")+">"}function s(t,e,n){var r=e.find("div.fc-event-time");m(t)&&f(t,e,r),n.isEnd&&y(t)&&v(t,e,r),C(t,e)}function l(t,e,n){function r(){s||(e.width(a).height("").draggable("option","grid",null),s=!0)}var a,o,i,s=!0,l=g("isRTL")?-1:1,u=R(),f=j(),v=P(),h=L();e.draggable({zIndex:9,opacity:g("dragOpacity","month"),revertDuration:g("dragRevertDuration"),start:function(h,m){p("eventDragStart",e,t,h,m),Z(t,e),a=e.width(),u.start(function(a,u,h,p){tt(),a?(o=!1,i=p*l,a.row?n?s&&(e.width(f-10),k(e,v*Math.round((t.end?(t.end-t.start)/wt:g("defaultEventMinutes"))/g("slotMinutes"))),e.draggable("option","grid",[f,1]),s=!1):o=!0:(K(c(d(t.start),i),c(M(t),i)),r()),o=o||s&&!i):(r(),o=!0),e.draggable("option","revert",o)},h,"drag")},stop:function(n,a){if(u.stop(),tt(),p("eventDragStop",e,t,n,a),o)r(),e.css("filter",""),U(t,e);else{var c=0;s||(c=Math.round((e.offset().top-q().offset().top)/v)*g("slotMinutes")+h-(60*t.start.getHours()+t.start.getMinutes())),Q(this,t,i,c,s,n,a)}}})}function f(t,e,n){function r(e){var r,a=u(d(t.start),e);t.end&&(r=u(d(t.end),e)),n.text(at(a,r,g("timeFormat")))}function a(){f&&(n.css("display",""),e.draggable("option","grid",[y,b]),f=!1)}var o,i,s,l,f=!1,v=g("isRTL")?-1:1,h=R(),m=Y(),y=j(),b=P();e.draggable({zIndex:9,scroll:!1,grid:[y,b],axis:1==m&&"y",opacity:g("dragOpacity"),revertDuration:g("dragRevertDuration"),start:function(r,u){p("eventDragStart",e,t,r,u),Z(t,e),o=e.position(),s=l=0,h.start(function(r,o,s,l){e.draggable("option","revert",!r),tt(),r&&(i=l*v,g("allDaySlot")&&!r.row?(f||(f=!0,n.hide(),e.draggable("option","grid",null)),K(c(d(t.start),i),c(M(t),i))):a())},r,"drag")},drag:function(t,e){(s=Math.round((e.position.top-o.top)/b)*g("slotMinutes"))!=l&&(f||r(s),l=s)},stop:function(n,c){var l=h.stop();tt(),p("eventDragStop",e,t,n,c),l&&(i||s||f)?Q(this,t,i,f?0:s,f,n,c):(a(),e.css("filter",""),e.css(o),r(0),U(t,e))}})}function v(t,e,n){var r,a,o=P();e.resizable({handles:{s:"div.ui-resizable-s"},grid:o,start:function(n,o){r=a=0,Z(t,e),e.css("z-index",9),p("eventResizeStart",this,t,n,o)},resize:function(i,s){(r=Math.round((Math.max(o,e.height())-s.originalSize.height)/o))!=a&&(n.text(at(t.start,r||t.end?u(b(t),g("slotMinutes")*r):null,g("timeFormat"))),a=r)},stop:function(n,a){p("eventResizeStop",this,t,n,a),r?G(this,t,0,g("slotMinutes")*r,n,a):(e.css("z-index",8),U(t,e))}})}var h=this;h.renderEvents=function(t,e){D(t);var a,i=t.length,s=[],c=[];for(a=0;a<i;a++)t[a].allDay?s.push(t[a]):c.push(t[a]);g("allDaySlot")&&(B(n(s),e),S()),o(r(c),e)},h.compileDaySegs=n,h.clearEvents=function(){w(),E().empty(),H().empty()},h.slotSegHtml=i,h.bindDaySeg=function(t,e,n){m(t)&&l(t,e,n.isStart),n.isEnd&&y(t)&&I(t,e,n),C(t,e)},ot.call(h);var g=h.opt,p=h.trigger,m=h.isEventDraggable,y=h.isEventResizable,b=h.eventEnd,D=h.reportEvents,w=h.reportEventClear,C=h.eventElementHandlers,S=h.setHeight,E=h.getDaySegmentContainer,H=h.getSlotSegmentContainer,R=h.getHoverListener,N=h.getMaxMinute,L=h.getMinMinute,W=h.timePosition,_=h.colContentLeft,O=h.colContentRight,B=h.renderDaySegs,I=h.resizableDayEvent,Y=h.getColCnt,j=h.getColWidth,P=h.getSlotHeight,q=h.getBodyContent,X=h.reportEventElement,U=h.showEvents,Z=h.hideEvents,Q=h.eventDrop,G=h.eventResize,K=h.renderDayOverlay,tt=h.clearOverlays,et=h.calendar,nt=et.formatDate,at=et.formatDates}function rt(t){var e,n,r,a,o,i;for(e=t.length-1;e>0;e--)for(a=t[e],n=0;n<a.length;n++)for(o=a[n],r=0;r<t[e-1].length;r++)E(o,i=t[e-1][r])&&(i.forward=Math.max(i.forward||0,(o.forward||0)+1))}function at(t,n,r){function a(t,e){var n=w[t];return"object"==typeof n?q(n,e||r):n}function o(t,e){return n.trigger.apply(n,[t,e||h].concat(Array.prototype.slice.call(arguments,2),[h]))}function i(t){return G(t.editable,(t.source||{}).editable,a("editable"))}function s(t){return t.end?d(t.end):g(t)}function l(t,e,n){var r,a=D[t._id],o=a.length;for(r=0;r<o;r++)e&&a[r][0]==e[0]||a[r][n]()}function f(t,n,r,a){r=r||0;for(var o,i=t.length,s=0;s<i;s++)o=t[s],a!==e&&(o.allDay=a),u(c(o.start,n,!0),r),o.end&&(o.end=u(c(o.end,n,!0),r)),p(o,w)}function v(t,e,n){n=n||0;for(var r,a=t.length,o=0;o<a;o++)(r=t[o]).end=u(c(s(r),e,!0),n),p(r,w)}var h=this;h.element=t,h.calendar=n,h.name=r,h.opt=a,h.trigger=o,h.isEventDraggable=function(t){return i(t)&&!a("disableDragging")},h.isEventResizable=function(t){return i(t)&&!a("disableResizing")},h.reportEvents=function(t){y={};var e,n,r=t.length;for(e=0;e<r;e++)n=t[e],y[n._id]?y[n._id].push(n):y[n._id]=[n]},h.eventEnd=s,h.reportEventElement=function(t,e){b.push(e),D[t._id]?D[t._id].push(e):D[t._id]=[e]},h.reportEventClear=function(){b=[],D={}},h.eventElementHandlers=function(t,e){e.click(function(n){if(!e.hasClass("ui-draggable-dragging")&&!e.hasClass("ui-resizable-resizing"))return o("eventClick",this,t,n)}).hover(function(e){o("eventMouseover",this,t,e)},function(e){o("eventMouseout",this,t,e)})},h.showEvents=function(t,e){l(t,e,"show")},h.hideEvents=function(t,e){l(t,e,"hide")},h.eventDrop=function(t,e,n,r,a,i,s){var c=e.allDay,l=e._id;f(y[l],n,r,a),o("eventDrop",t,e,n,r,a,function(){f(y[l],-n,-r,c),m(l)},i,s),m(l)},h.eventResize=function(t,e,n,r,a,i){var s=e._id;v(y[s],n,r),o("eventResize",t,e,n,r,function(){v(y[s],-n,-r),m(s)},a,i),m(s)};var g=h.defaultEventEnd,p=n.normalizeEvent,m=n.reportEventChange,y={},b=[],D={},w=n.options}function ot(){function n(e,n,o){var i,c,d,g=t("<div/>"),p=W(),m=e.length;for(g[0].innerHTML=r(e),i=g.children(),p.append(i),a(e,i),s(e),l(e),u(e),h(e,v(f())),i=[],c=0;c<m;c++)(d=e[c].element)&&(e[c].row===n&&d.css("top",o),i.push(d[0]));return t(i)}function r(t){var e,n,r,a,o,i,s,c,l,u,f=p("isRTL"),d=t.length,v=H(),h=v.left,g=v.right,m="";for(e=0;e<d;e++)r=(n=t[e]).event,o=["fc-event","fc-event-skin","fc-event-hori"],y(r)&&o.push("fc-event-draggable"),f?(n.isStart&&o.push("fc-corner-right"),n.isEnd&&o.push("fc-corner-left"),i=N(n.end.getDay()-1),s=N(n.start.getDay()),c=n.isEnd?k(i):h,l=n.isStart?R(s):g):(n.isStart&&o.push("fc-corner-left"),n.isEnd&&o.push("fc-corner-right"),i=N(n.start.getDay()),s=N(n.end.getDay()-1),c=n.isStart?k(i):h,l=n.isEnd?R(s):g),o=o.concat(r.className),r.source&&(o=o.concat(r.source.className||[])),a=r.url,u=$(r,p),m+=a?"<a href='"+V(a)+"'":"<div",m+=" class='"+o.join(" ")+"' style='position:absolute;z-index:8;left:"+c+"px;"+u+"'><div class='fc-event-inner fc-event-skin'"+(u?" style='"+u+"'":"")+">",!r.allDay&&n.isStart&&(m+="<span class='fc-event-time'>"+V(B(r.start,r.end,p("timeFormat")))+"</span>"),m+="<span class='fc-event-title'>"+V(r.title)+"</span></div>",n.isEnd&&b(r)&&(m+="<div class='ui-resizable-handle ui-resizable-"+(f?"w":"e")+"'>&nbsp;&nbsp;&nbsp;</div>"),m+="</"+(a?"a":"div")+">",n.left=c,n.outerWidth=l-c,n.startCol=i,n.endCol=s+1;return m}function a(e,n){var r,a,o,i,s,c=e.length;for(r=0;r<c;r++)o=(a=e[r]).event,i=t(n[r]),!1===(s=m("eventRender",o,o,i))?i.remove():(s&&!0!==s&&(s=t(s).css({position:"absolute",left:a.left}),i.replaceWith(s),i=s),a.element=i)}function o(t){var e,n,r,a=t.length;for(e=0;e<a;e++)(r=(n=t[e]).element)&&w(n.event,r)}function i(t,e,n){var r,a,o,i,s=t.length;for(r=0;r<s;r++)(o=(a=t[r]).element)&&((i=a.event)._id===n?O(i,o,a):o[0]._fci=r);z(e,t,O)}function s(t){var n,r,a,o,i,s=t.length,c={};for(n=0;n<s;n++)(a=(r=t[n]).element)&&((i=c[o=r.key=J(a[0])])===e&&(i=c[o]=F(a,!0)),r.hsides=i)}function l(t){var e,n,r,a=t.length;for(e=0;e<a;e++)(r=(n=t[e]).element)&&(r[0].style.width=Math.max(0,n.outerWidth-n.hsides)+"px")}function u(t){var n,r,a,o,i,s=t.length,c={};for(n=0;n<s;n++)(a=(r=t[n]).element)&&((i=c[o=r.key])===e&&(i=c[o]=_(a)),r.outerHeight=a[0].offsetHeight+i)}function f(){var t,e=E(),n=[];for(t=0;t<e;t++)n[t]=T(t).find("td:first div.fc-day-content > div");return n}function v(t){var e,n=t.length,r=[];for(e=0;e<n;e++)r[e]=t[e][0].offsetTop;return r}function h(t,e){var n,r,a,o,i=t.length;for(n=0;n<i;n++)(a=(r=t[n]).element)&&(a[0].style.top=e[r.row]+(r.top||0)+"px",o=r.event,m("eventAfterRender",o,o,a))}var g=this;g.renderDaySegs=function(t,e){var n,c,d,g,p,m,y,b=W(),D=E(),w=x(),M=0,C=t.length;for(b[0].innerHTML=r(t),a(t,b.children()),o(t),i(t,b,e),s(t),l(t),u(t),n=f(),c=0;c<D;c++){for(d=[],g=0;g<w;g++)d[g]=0;for(;M<C&&(p=t[M]).row==c;){for(m=j(d.slice(p.startCol,p.endCol)),p.top=m,m+=p.outerHeight,y=p.startCol;y<p.endCol;y++)d[y]=m;M++}n[c].height(j(d))}h(t,v(n))},g.resizableDayEvent=function(e,r,a){var o=p("isRTL"),i=o?"w":"e",s=r.find("div.ui-resizable-"+i),l=!1;X(r),r.mousedown(function(t){t.preventDefault()}).click(function(t){l&&(t.preventDefault(),t.stopImmediatePropagation())}),s.mousedown(function(s){if(1==s.which){l=!0;var u,f,v=g.getHoverListener(),h=E(),p=x(),y=o?-1:1,b=o?p-1:0,w=r.css("top"),T=t.extend({},e),z=L(e.start);P(),t("body").css("cursor",i+"-resize").one("mouseup",function(n){m("eventResizeStop",this,e,n),t("body").css("cursor",""),v.stop(),Y(),u&&S(this,e,u,0,n),setTimeout(function(){l=!1},0)}),m("eventResizeStart",this,e,s),v.start(function(t,r){if(t){var s=Math.max(z.row,t.row),l=t.col;1==h&&(s=0),s==z.row&&(l=o?Math.min(z.col,l):Math.max(z.col,l)),u=7*s+l*y+b-(7*r.row+r.col*y+b);var v=c(D(e),u,!0);if(u){T.end=v;var g=f;(f=n(A([T]),a.row,w)).find("*").css("cursor",i+"-resize"),g&&g.remove(),C(e)}else f&&(M(e),f.remove(),f=null);Y(),I(e.start,c(d(v),1))}},s)}})};var p=g.opt,m=g.trigger,y=g.isEventDraggable,b=g.isEventResizable,D=g.eventEnd,w=g.reportEventElement,M=g.showEvents,C=g.hideEvents,S=g.eventResize,E=g.getRowCnt,x=g.getColCnt,T=(g.getColWidth,g.allDayRow),H=g.allDayBounds,k=g.colContentLeft,R=g.colContentRight,N=g.dayOfWeekCol,L=g.dateCell,A=g.compileDaySegs,W=g.getDaySegmentContainer,O=g.bindDaySeg,B=g.calendar.formatDates,I=g.renderDayOverlay,Y=g.clearOverlays,P=g.clearSelection}function it(){function e(t){l&&(l=!1,c(),o("unselect",null,t))}function n(t,e,n,r){l=!0,o("select",null,t,e,n,r)}var r=this;r.select=function(t,r,a){e(),r||(r=i(t,a)),s(t,r,a),n(t,r,a)},r.unselect=e,r.reportSelection=n,r.daySelectionMousedown=function(o){var i=r.cellDate,l=r.cellIsAllDay,u=r.getHoverListener(),f=r.reportDayClick;if(1==o.which&&a("selectable")){e(o);var d;u.start(function(t,e){c(),t&&l(t)?(d=[i(e),i(t)].sort(Y),s(d[0],d[1],!0)):d=null},o),t(document).one("mouseup",function(t){u.stop(),d&&(+d[0]==+d[1]&&f(d[0],!0,t),n(d[0],d[1],!0,t))})}};var a=r.opt,o=r.trigger,i=r.defaultSelectionEnd,s=r.renderSelection,c=r.clearSelection,l=!1;a("selectable")&&a("unselectAuto")&&t(document).mousedown(function(n){var r=a("unselectCancel");r&&t(n.target).parents(r).length||e(n)})}function st(){var e=this;e.renderOverlay=function(e,a){var o=r.shift();return o||(o=t("<div class='fc-cell-overlay' style='position:absolute;z-index:3'/>")),o[0].parentNode!=a[0]&&o.appendTo(a),n.push(o.css(e).show()),o},e.clearOverlays=function(){for(var t;t=n.shift();)r.push(t.hide().unbind())};var n=[],r=[]}function ct(t){var e,n,r=this;r.build=function(){t(e=[],n=[])},r.cell=function(t,r){var a,o=e.length,i=n.length,s=-1,c=-1;for(a=0;a<o;a++)if(r>=e[a][0]&&r<e[a][1]){s=a;break}for(a=0;a<i;a++)if(t>=n[a][0]&&t<n[a][1]){c=a;break}return s>=0&&c>=0?{row:s,col:c}:null},r.rect=function(t,r,a,o,i){var s=i.offset();return{top:e[t][0]-s.top,left:n[r][0]-s.left,width:n[o][1]-n[r][0],height:e[a][1]-e[t][0]}}}function lt(e){function n(t){ut(t);var n=e.cell(t.pageX,t.pageY);(!n!=!i||n&&(n.row!=i.row||n.col!=i.col))&&(n?(o||(o=n),a(n,o,n.row-o.row,n.col-o.col)):a(n,o),i=n)}var r,a,o,i,s=this;s.start=function(s,c,l){a=s,o=i=null,e.build(),n(c),r=l||"mousemove",t(document).bind(r,n)},s.stop=function(){return t(document).unbind(r,n),i}}function ut(t){t.pageX===e&&(t.pageX=t.originalEvent.pageX,t.pageY=t.originalEvent.pageY)}function ft(t){function n(e){return a[e]=a[e]||t(e)}var r=this,a={},o={},i={};r.left=function(t){return o[t]=o[t]===e?n(t).position().left:o[t]},r.right=function(t){return i[t]=i[t]===e?r.left(t)+n(t).width():i[t]},r.clear=function(){a={},o={},i={}}}var dt={defaultView:"month",aspectRatio:1.35,header:{left:"title",center:"",right:"today prev,next"},weekends:!0,allDayDefault:!0,ignoreTimezone:!0,lazyFetching:!0,startParam:"start",endParam:"end",titleFormat:{month:"MMMM yyyy",week:"MMM d[ yyyy]{ '&#8212;'[ MMM] d yyyy}",day:"dddd, MMM d, yyyy"},columnFormat:{month:"ddd",week:"ddd M/d",day:"dddd M/d"},timeFormat:{"":"h(:mm)t"},isRTL:!1,firstDay:0,monthNames:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],monthNamesShort:["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dec"],dayNames:["Domingo","Lunes","Martes","Miércoles","Jueves","Viernes","Sábado"],dayNamesShort:["Dom","Lun","Mar","Mie","Jue","Vie","Sab"],buttonText:{prev:"&nbsp;&#9668;&nbsp;",next:"&nbsp;&#9658;&nbsp;",prevYear:"&nbsp;&lt;&lt;&nbsp;",nextYear:"&nbsp;&gt;&gt;&nbsp;",today:"hoy",month:"mes",week:"semana",day:"día"},theme:!1,buttonIcons:{prev:"circle-triangle-w",next:"circle-triangle-e"},unselectAuto:!0,dropAccept:"*"},vt={header:{left:"next,prev today",center:"",right:"title"},buttonText:{prev:"&nbsp;&#9658;&nbsp;",next:"&nbsp;&#9668;&nbsp;",prevYear:"&nbsp;&gt;&gt;&nbsp;",nextYear:"&nbsp;&lt;&lt;&nbsp;"},buttonIcons:{prev:"circle-triangle-e",next:"circle-triangle-w"}},ht=t.fullCalendar={version:"1.5.4"},gt=ht.views={};t.fn.fullCalendar=function(n){if("string"==typeof n){var a,o=Array.prototype.slice.call(arguments,1);return this.each(function(){var r=t.data(this,"fullCalendar");if(r&&t.isFunction(r[n])){var i=r[n].apply(r,o);a===e&&(a=i),"destroy"==n&&t.removeData(this,"fullCalendar")}}),a!==e?a:this}var i=n.eventSources||[];return delete n.eventSources,n.events&&(i.push(n.events),delete n.events),n=t.extend(!0,{},dt,n.isRTL||n.isRTL===e&&dt.isRTL?vt:{},n),this.each(function(e,a){var o=t(a),s=new r(o,n,i);o.data("fullCalendar",s),s.render()}),this},ht.sourceNormalizers=[],ht.sourceFetchers=[];var pt={dataType:"json",cache:!1},mt=1;ht.addDays=c,ht.cloneDate=d,ht.parseDate=m,ht.parseISO8601=y,ht.parseTime=b,ht.formatDate=D,ht.formatDates=w;var yt=["sun","mon","tue","wed","thu","fri","sat"],bt=864e5,Dt=36e5,wt=6e4,Mt={s:function(t){return t.getSeconds()},ss:function(t){return P(t.getSeconds())},m:function(t){return t.getMinutes()},mm:function(t){return P(t.getMinutes())},h:function(t){return t.getHours()%12||12},hh:function(t){return P(t.getHours()%12||12)},H:function(t){return t.getHours()},HH:function(t){return P(t.getHours())},d:function(t){return t.getDate()},dd:function(t){return P(t.getDate())},ddd:function(t,e){return e.dayNamesShort[t.getDay()]},dddd:function(t,e){return e.dayNames[t.getDay()]},M:function(t){return t.getMonth()+1},MM:function(t){return P(t.getMonth()+1)},MMM:function(t,e){return e.monthNamesShort[t.getMonth()]},MMMM:function(t,e){return e.monthNames[t.getMonth()]},yy:function(t){return(t.getFullYear()+"").substring(2)},yyyy:function(t){return t.getFullYear()},t:function(t){return t.getHours()<12?"a":"p"},tt:function(t){return t.getHours()<12?"am":"pm"},T:function(t){return t.getHours()<12?"A":"P"},TT:function(t){return t.getHours()<12?"AM":"PM"},u:function(t){return D(t,"yyyy-MM-dd'T'HH:mm:ss'Z'")},S:function(t){var e=t.getDate();return e>10&&e<20?"th":["st","nd","rd"][e%10-1]||"th"}};ht.applyAll=Q,gt.month=function(t,e){var n=this;n.render=function(t,e){e&&(s(t,e),t.setDate(1));var i=d(t,!0);i.setDate(1);var l=s(d(i),1),u=d(i),f=d(l),v=r("firstDay"),g=r("weekends")?0:1;g&&(h(u),h(f,-1,!0)),c(u,-(u.getDay()-Math.max(v,g)+7)%7),c(f,(7-f.getDay()+Math.max(v,g))%7);var p=Math.round((f-u)/(7*bt));"fixed"==r("weekMode")&&(c(f,7*(6-p)),p=6),n.title=o(i,r("titleFormat")),n.start=i,n.end=l,n.visStart=u,n.visEnd=f,a(6,p,g?5:7,!0)},K.call(n,t,e,"month");var r=n.opt,a=n.renderBasic,o=e.formatDate},gt.basicWeek=function(t,e){var n=this;n.render=function(t,e){e&&c(t,7*e);var i=c(d(t),-(t.getDay()-r("firstDay")+7)%7),s=c(d(i),7),l=d(i),u=d(s),f=r("weekends");f||(h(l),h(u,-1,!0)),n.title=o(l,c(d(u),-1),r("titleFormat")),n.start=i,n.end=s,n.visStart=l,n.visEnd=u,a(1,1,f?7:5,!1)},K.call(n,t,e,"basicWeek");var r=n.opt,a=n.renderBasic,o=e.formatDates},gt.basicDay=function(t,e){var n=this;n.render=function(t,e){e&&(c(t,e),r("weekends")||h(t,e<0?-1:1)),n.title=o(t,r("titleFormat")),n.start=n.visStart=d(t,!0),n.end=n.visEnd=c(d(n.start),1),a(1,1,1,!1)},K.call(n,t,e,"basicDay");var r=n.opt,a=n.renderBasic,o=e.formatDate},n({weekMode:"fixed"}),gt.agendaWeek=function(t,e){var n=this;n.render=function(t,e){e&&c(t,7*e);var i=c(d(t),-(t.getDay()-r("firstDay")+7)%7),s=c(d(i),7),l=d(i),u=d(s),f=r("weekends");f||(h(l),h(u,-1,!0)),n.title=o(l,c(d(u),-1),r("titleFormat")),n.start=i,n.end=s,n.visStart=l,n.visEnd=u,a(f?7:5)},et.call(n,t,e,"agendaWeek");var r=n.opt,a=n.renderAgenda,o=e.formatDates},gt.agendaDay=function(t,e){var n=this;n.render=function(t,e){e&&(c(t,e),r("weekends")||h(t,e<0?-1:1));var i=d(t,!0),s=c(d(i),1);n.title=o(t,r("titleFormat")),n.start=n.visStart=i,n.end=n.visEnd=s,a(1)},et.call(n,t,e,"agendaDay");var r=n.opt,a=n.renderAgenda,o=e.formatDate},n({allDaySlot:!0,allDayText:"all-day",firstHour:6,slotMinutes:30,defaultEventMinutes:120,axisFormat:"h(:mm)tt",timeFormat:{agenda:"h:mm{ - h:mm}"},dragOpacity:{agenda:.5},minTime:0,maxTime:24})}(jQuery);
